<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Olympus Bot v2 - –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .nav-tabs .nav-link {
            color: #6c757d;
        }
        .nav-tabs .nav-link.active {
            color: #0d6efd;
            font-weight: 600;
        }
        .stat-card {
            border-left: 4px solid;
            transition: transform 0.2s;
        }
        .stat-card:hover {
            transform: translateY(-5px);
        }
        .stat-card.primary { border-left-color: #0d6efd; }
        .stat-card.success { border-left-color: #198754; }
        .stat-card.warning { border-left-color: #ffc107; }
        .stat-card.danger { border-left-color: #dc3545; }
        .file-upload-zone {
            border: 2px dashed #dee2e6;
            border-radius: 0.375rem;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s;
        }
        .file-upload-zone:hover {
            border-color: #0d6efd;
            background-color: #f8f9fa;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-dark bg-primary mb-4">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">
                <i class="bi bi-trophy"></i> Olympus Bot v2 - –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            </span>
            <span class="text-white">
                <i class="bi bi-person-circle"></i> –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
            </span>
        </div>
    </nav>

    <div class="container-fluid">
        <!-- –¢–∞–±—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
        <ul class="nav nav-tabs mb-4" role="tablist">
            <li class="nav-item">
                <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#dashboard-tab">
                    <i class="bi bi-speedometer2"></i> –î–∞—à–±–æ—Ä–¥
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#students-tab">
                    <i class="bi bi-people"></i> –£—á–µ–Ω–∏–∫–∏
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#codes-tab">
                    <i class="bi bi-key"></i> –ö–æ–¥—ã
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#export-tab">
                    <i class="bi bi-download"></i> –≠–∫—Å–ø–æ—Ä—Ç
                </button>
            </li>
        </ul>

        <div class="tab-content">
            <!-- –î–ê–®–ë–û–†–î -->
            <div class="tab-pane fade show active" id="dashboard-tab">
                <div class="row mb-4" id="statsSection">
                    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">üìä –°—Ç–∞—Ç—É—Å –ø–æ –∫–ª–∞—Å—Å–∞–º</h5>
                                <div id="classStatusTable"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –£–ß–ï–ù–ò–ö–ò -->
            <div class="tab-pane fade" id="students-tab">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">üì§ –ó–∞–≥—Ä—É–∑–∫–∞ —É—á–µ–Ω–∏–∫–æ–≤ –∏–∑ Excel</h5>
                                <form id="uploadStudentsForm">
                                    <div class="file-upload-zone mb-3" onclick="document.getElementById('studentsFileInput').click()">
                                        <i class="bi bi-cloud-upload fs-1 text-primary"></i>
                                        <p class="mb-0">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞ Excel</p>
                                        <small class="text-muted">–§–æ—Ä–º–∞—Ç: –§–ò–û, –ö–ª–∞—Å—Å</small>
                                    </div>
                                    <input type="file" id="studentsFileInput" accept=".xlsx,.xls" style="display:none">
                                    <div class="d-grid gap-2">
                                        <button type="button" class="btn btn-primary" onclick="uploadStudents()">
                                            <i class="bi bi-upload"></i> –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã—Ö —É—á–µ–Ω–∏–∫–æ–≤
                                        </button>
                                        <button type="button" class="btn btn-warning" onclick="updateStudents()">
                                            <i class="bi bi-arrow-repeat"></i> –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
                                        </button>
                                    </div>
                                </form>
                                <div id="uploadStudentsResult" class="mt-3"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞ –≤—Ä—É—á–Ω—É—é</h5>
                                <form id="addStudentForm">
                                    <div class="mb-3">
                                        <label class="form-label">–§–ò–û —É—á–µ–Ω–∏–∫–∞</label>
                                        <input type="text" class="form-control" id="studentName" required>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">–ö–ª–∞—Å—Å</label>
                                        <select class="form-select" id="studentClass" required>
                                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å</option>
                                            <option value="4">4 –∫–ª–∞—Å—Å</option>
                                            <option value="5">5 –∫–ª–∞—Å—Å</option>
                                            <option value="6">6 –∫–ª–∞—Å—Å</option>
                                            <option value="7">7 –∫–ª–∞—Å—Å</option>
                                            <option value="8">8 –∫–ª–∞—Å—Å</option>
                                            <option value="9">9 –∫–ª–∞—Å—Å</option>
                                            <option value="10">10 –∫–ª–∞—Å—Å</option>
                                            <option value="11">11 –∫–ª–∞—Å—Å</option>
                                        </select>
                                    </div>
                                    <button type="submit" class="btn btn-success w-100">
                                        <i class="bi bi-plus-circle"></i> –î–æ–±–∞–≤–∏—Ç—å
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">üë• –°–ø–∏—Å–æ–∫ —É—á–µ–Ω–∏–∫–æ–≤</h5>
                        <div class="mb-3">
                            <select class="form-select" id="classFilter" onchange="loadStudentsByClass()">
                                <option value="">–í—Å–µ –∫–ª–∞—Å—Å—ã</option>
                                <option value="4">4 –∫–ª–∞—Å—Å</option>
                                <option value="5">5 –∫–ª–∞—Å—Å</option>
                                <option value="6">6 –∫–ª–∞—Å—Å</option>
                                <option value="7">7 –∫–ª–∞—Å—Å</option>
                                <option value="8">8 –∫–ª–∞—Å—Å</option>
                                <option value="9">9 –∫–ª–∞—Å—Å</option>
                                <option value="10">10 –∫–ª–∞—Å—Å</option>
                                <option value="11">11 –∫–ª–∞—Å—Å</option>
                            </select>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover" id="studentsTable">
                                <thead class="table-light">
                                    <tr>
                                        <th>–§–ò–û</th>
                                        <th>–ö–ª–∞—Å—Å</th>
                                        <th>–°—Ç–∞—Ç—É—Å</th>
                                        <th>–ö–æ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
                                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ö–û–î–´ -->
            <div class="tab-pane fade" id="codes-tab">
                <div class="row mb-3">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">üì§ –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–¥–æ–≤ –∏–∑ CSV —Ñ–∞–π–ª–æ–≤</h5>
                                <form id="uploadCodesForm">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label class="form-label">–ü—Ä–µ–¥–º–µ—Ç (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                                                <input type="text" class="form-control" id="codesSubject" placeholder="–ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –≤–æ–∑—å–º–µ—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–∞">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label class="form-label">–†–µ–∂–∏–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è</label>
                                                <select class="form-select" id="distributionMode">
                                                    <option value="on_demand">On Demand (–≤—ã–¥–∞—á–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É)</option>
                                                    <option value="pre_distributed">Pre-Distributed (—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ä–∞–∑—É)</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="file-upload-zone mb-3" onclick="document.getElementById('codesFileInput').click()">
                                        <i class="bi bi-file-earmark-text fs-1 text-success"></i>
                                        <p class="mb-0">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ CSV —Ñ–∞–π–ª–æ–≤</p>
                                        <small class="text-muted">–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ —Å—Ä–∞–∑—É</small>
                                    </div>
                                    <input type="file" id="codesFileInput" accept=".csv" multiple style="display:none">
                                    <button type="button" class="btn btn-success w-100" onclick="uploadCodes()">
                                        <i class="bi bi-upload"></i> –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–¥—ã
                                    </button>
                                </form>
                                <div id="uploadCodesResult" class="mt-3"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">üìã –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏</h5>
                        <div id="sessionsTable"></div>
                    </div>
                </div>
            </div>

            <!-- –≠–ö–°–ü–û–†–¢ -->
            <div class="tab-pane fade" id="export-tab">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">üì• –≠–∫—Å–ø–æ—Ä—Ç –ø–æ –∫–ª–∞—Å—Å–∞–º</h5>
                                <p class="text-muted">–í—ã–≥—Ä—É–∑–∏—Ç—å –∫–æ–¥—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞</p>
                                <div class="mb-3">
                                    <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Å—Å–∏—é</label>
                                    <select class="form-select" id="exportSessionSelect"></select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å</label>
                                    <select class="form-select" id="exportClassSelect">
                                        <option value="4">4 –∫–ª–∞—Å—Å</option>
                                        <option value="5">5 –∫–ª–∞—Å—Å</option>
                                        <option value="6">6 –∫–ª–∞—Å—Å</option>
                                        <option value="7">7 –∫–ª–∞—Å—Å</option>
                                        <option value="8">8 –∫–ª–∞—Å—Å</option>
                                        <option value="9">9 –∫–ª–∞—Å—Å</option>
                                        <option value="10">10 –∫–ª–∞—Å—Å</option>
                                        <option value="11">11 –∫–ª–∞—Å—Å</option>
                                    </select>
                                </div>
                                <button class="btn btn-primary w-100" onclick="exportClassCodes()">
                                    <i class="bi bi-download"></i> –°–∫–∞—á–∞—Ç—å CSV
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">üì¶ –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤</h5>
                                <p class="text-muted">–í—ã–≥—Ä—É–∑–∏—Ç—å –∞—Ä—Ö–∏–≤ —Å–æ –≤—Å–µ–º–∏ –∫–ª–∞—Å—Å–∞–º–∏</p>
                                <div class="mb-3">
                                    <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Å—Å–∏—é</label>
                                    <select class="form-select" id="exportAllSessionSelect"></select>
                                </div>
                                <button class="btn btn-success w-100" onclick="exportAllClasses()">
                                    <i class="bi bi-file-zip"></i> –°–∫–∞—á–∞—Ç—å ZIP –∞—Ä—Ö–∏–≤
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        document.addEventListener('DOMContentLoaded', function() {
            loadStatistics();
            loadSessions();
            loadClassDistribution();
            setInterval(loadStatistics, 30000); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        async function loadStatistics() {
            // TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            console.log('Loading statistics...');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Å—Å–∏–π
        async function loadSessions() {
            try {
                const response = await fetch('/admin/codes/sessions');
                const sessions = await response.json();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–µ–ª–µ–∫—Ç—ã –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
                const sessionSelect = document.getElementById('exportSessionSelect');
                const sessionSelect2 = document.getElementById('exportAllSessionSelect');
                
                sessionSelect.innerHTML = '';
                sessionSelect2.innerHTML = '';
                
                sessions.forEach(s => {
                    const option = `<option value="${s.id}">${s.subject} (${new Date(s.date).toLocaleDateString()})</option>`;
                    sessionSelect.innerHTML += option;
                    sessionSelect2.innerHTML += option;
                });
                
                // TODO: –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π –≤ —Ç–∞–±–ª–∏—Ü–µ
            } catch (error) {
                console.error('Error loading sessions:', error);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —É—á–µ–Ω–∏–∫–æ–≤
        async function uploadStudents() {
            const fileInput = document.getElementById('studentsFileInput');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª');
                return;
            }

            const formData = new FormData();
            formData.append('file', file);

            const resultDiv = document.getElementById('uploadStudentsResult');
            resultDiv.innerHTML = '<div class="alert alert-info">–ó–∞–≥—Ä—É–∑–∫–∞...</div>';

            try {
                const response = await fetch('/admin/students/upload-excel', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();

                if (result.success) {
                    resultDiv.innerHTML = `
                        <div class="alert alert-success">
                            <strong>‚úÖ –£—Å–ø–µ—à–Ω–æ!</strong><br>
                            –î–æ–±–∞–≤–ª–µ–Ω–æ —É—á–µ–Ω–∏–∫–æ–≤: ${result.count}
                        </div>
                    `;
                    fileInput.value = '';
                    loadClassDistribution();
                } else {
                    resultDiv.innerHTML = `<div class="alert alert-danger">–û—à–∏–±–∫–∞: ${result.detail}</div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="alert alert-danger">–û—à–∏–±–∫–∞: ${error.message}</div>`;
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—á–µ–Ω–∏–∫–æ–≤
        async function updateStudents() {
            const fileInput = document.getElementById('studentsFileInput');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª');
                return;
            }

            if (!confirm('–≠—Ç–æ –æ–±–Ω–æ–≤–∏—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É—á–µ–Ω–∏–∫–æ–≤ –∏ –¥–æ–±–∞–≤–∏—Ç –Ω–æ–≤—ã—Ö. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')) {
                return;
            }

            const formData = new FormData();
            formData.append('file', file);

            const resultDiv = document.getElementById('uploadStudentsResult');
            resultDiv.innerHTML = '<div class="alert alert-info">–û–±—Ä–∞–±–æ—Ç–∫–∞...</div>';

            try {
                const response = await fetch('/admin/students/update-from-excel', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();

                if (result.success) {
                    resultDiv.innerHTML = `
                        <div class="alert alert-success">
                            <strong>‚úÖ –°–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</strong><br>
                            –î–æ–±–∞–≤–ª–µ–Ω–æ: ${result.added.length}<br>
                            –û–±–Ω–æ–≤–ª–µ–Ω–æ: ${result.updated.length}<br>
                            –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ: ${result.deactivated.length}
                        </div>
                    `;
                    fileInput.value = '';
                    loadClassDistribution();
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="alert alert-danger">–û—à–∏–±–∫–∞: ${error.message}</div>`;
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–¥–æ–≤
        async function uploadCodes() {
            const fileInput = document.getElementById('codesFileInput');
            const files = fileInput.files;
            
            if (files.length === 0) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã');
                return;
            }

            const formData = new FormData();
            for (let file of files) {
                formData.append('files', file);
            }

            const subject = document.getElementById('codesSubject').value;
            const mode = document.getElementById('distributionMode').value;

            if (subject) formData.append('subject', subject);
            formData.append('distribution_mode', mode);

            const resultDiv = document.getElementById('uploadCodesResult');
            resultDiv.innerHTML = '<div class="alert alert-info">–ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞...</div>';

            try {
                const response = await fetch('/admin/codes/upload-csv', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();

                if (result.success) {
                    let html = `
                        <div class="alert alert-success">
                            <strong>‚úÖ –ö–æ–¥—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã!</strong><br>
                            –ü—Ä–µ–¥–º–µ—Ç: ${result.subject}<br>
                            –†–µ–∂–∏–º: ${result.distribution_mode}<br>
                        </div>
                    `;
                    
                    resultDiv.innerHTML = html;
                    fileInput.value = '';
                    loadSessions();
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="alert alert-danger">–û—à–∏–±–∫–∞: ${error.message}</div>`;
            }
        }

        // –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–¥–æ–≤ –∫–ª–∞—Å—Å–∞
        function exportClassCodes() {
            const sessionId = document.getElementById('exportSessionSelect').value;
            const classNum = document.getElementById('exportClassSelect').value;
            
            window.location.href = `/admin/codes/export/class/${sessionId}/${classNum}`;
        }

        // –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤
        function exportAllClasses() {
            const sessionId = document.getElementById('exportAllSessionSelect').value;
            
            window.location.href = `/admin/codes/export/all/${sessionId}`;
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ –∫–ª–∞—Å—Å–∞–º
        async function loadClassDistribution() {
            // TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–µ–Ω–∏–∫–∞ –≤—Ä—É—á–Ω—É—é
        document.getElementById('addStudentForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const name = document.getElementById('studentName').value;
            const classNum = document.getElementById('studentClass').value;
            
            try {
                const response = await fetch('/admin/students/', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        full_name: name,
                        class_number: parseInt(classNum)
                    })
                });
                
                const result = await response.json();
                
                alert(`–£—á–µ–Ω–∏–∫ –¥–æ–±–∞–≤–ª–µ–Ω!\n–ö–æ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ${result.registration_code}`);
                document.getElementById('addStudentForm').reset();
                loadClassDistribution();
            } catch (error) {
                alert('–û—à–∏–±–∫–∞: ' + error.message);
            }
        });
    </script>
</body>
</html>